# Scan 命令

## 用途

`scan` 是一个网络扫描工具，用于扫描局域网中的活跃设备，并获取设备的 IP 地址与 MAC 地址的映射关系。该工具支持 IPv4 和 IPv6 网络扫描。

## 功能特性

- ✅ 支持 IPv4 和 IPv6 网络扫描(ipv6 一次性最多支持 128000 个 ip)
- ✅ 自动检测并列出所有可用网段
- ✅ 交互式网段选择（不带参数时）
- ✅ 直接扫描指定网段（带 CIDR 参数）
- ✅ 格式化输出扫描结果
- ✅ 显示设备的 IP 地址和 MAC 地址映射

## 使用方法

### 方式一：交互式选择网段

不带任何参数运行命令，工具会自动检测所有可用的网络接口和网段，并显示列表供用户选择：

```bash
scan
```

运行后会显示类似以下内容：

```
检测到以下可用网段，请选择要扫描的网段:
--------------------------------------------------------
序号  网卡名称  IP地址      MAC地址        类型
--------------------------------------------------------
1     en0      192.168.1.2  aa:bb:cc:dd:ee:ff IPv4
2     en1      10.0.0.5     ff:ee:dd:cc:bb:aa IPv4
--------------------------------------------------------
请输入序号 (1-2):
```

输入对应的序号即可开始扫描。

### 方式二：直接指定网段

直接传入 CIDR 格式的网段参数：

```bash
# IPv4 网段扫描
scan 192.168.1.0/24

# IPv6 网段扫描
scan 2001:db8::/64
```

## 输出示例

扫描完成后，会显示格式化的结果表格：

```
扫描结果:
----------------------------------------
IP地址      MAC地址
----------------------------------------
192.168.1.1 aa:bb:cc:dd:ee:ff
192.168.1.2 ff:ee:dd:cc:bb:aa
192.168.1.3 11:22:33:44:55:66
----------------------------------------
共发现 3 个设备
```

## 注意事项

1. **权限要求**：扫描网络需要足够的系统权限，可能需要使用 `sudo` 运行
2. **网络范围**：只能扫描与当前主机在同一网段的设备
3. **扫描时间**：扫描时间取决于网段大小，较大的网段可能需要更长时间

## 错误处理

- 如果 CIDR 格式不正确，会显示错误信息
- 如果无法找到匹配的网络接口，会提示选择网卡失败
- 如果扫描过程中出错，会显示具体的错误信息
